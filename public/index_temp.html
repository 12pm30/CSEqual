<!--
/**
 * Copyright 2015 IBM Corp. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
-->

<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Image Analysis</title>
  <meta charset="utf-8">
  <meta content="stuff, to, help, search, engines, not" name="keywords">
  <meta content="What this page is about." name="description">
  <meta content="Display Webcam Stream" name="title">
  <title>Display Webcam Stream</title>
    
  <style>
    #container {
        margin: 0px auto;
        width: 500px;
        height: 375px;
        border: 10px #333 solid;
    }
    #videoElement {
        width: 500px;
        height: 375px;
        background-color: #666;
    }
  </style>
	<meta name="viewport" content="initial-scale=1, maximum-scale=1, minimal-ui">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<link rel="icon" href="/images/favicon.ico" type="image/x-icon">
	<link href="css/watson-bootstrap-dark.css" rel="stylesheet">
	<link href="css/ratchet.css" rel="stylesheet">
	<link href="css/banner.css" rel="stylesheet">
	<link href="css/style.css" rel="stylesheet">

</head>

<body>
	<header class="bar bar-nav">
		<h1 class="title">Image Analysis</h1>
	</header>
	<br><br>
	
      <video autoplay="true" id="videoElement">
      </video>
      <a id="capture-button">Click my picture!</a>
	
  <script src="http://hongru.github.io/proj/canvas2image/canvas2image.js"></script>
<script>
	function takepicture() {
	    var video = document.getElementById('videoElement');
    	var canvas = document.getElementById('canvas');
    	var photo = document.getElementById('photo');
	    var context = canvas.getContext('2d');
	    var width = 500;    // We will scale the photo width to this
  	  var height = 375;     // This will be computed based on the input stream
	    var streaming = false;
	    if (width && height) {
	      canvas.width = width;
	      canvas.height = height;
	      context.drawImage(video, 0, 0, width, height);
	      var data = canvas.toDataURL('image/png');
	      var canvas = document.getElementById("canvas");
        
	    } else {
	      clearphoto();
	    }
	  }
	
	function clearphoto() {
		var video = document.getElementById('videoElement');
    		var canvas = document.getElementById('canvas');
    		var photo = document.getElementById('photo');
    		var context = canvas.getContext('2d');
		var width = 320;    // We will scale the photo width to this
  		var width = 320;    // We will scale the photo width to this
  	    	var height = 0;     // This will be computed based on the input stream
	    	var streaming = false;
    		context.fillStyle = "#AAA";
    		context.fillRect(0, 0, canvas.width, canvas.height);
		
    		var data = canvas.toDataURL('image/png');
    		photo.setAttribute('src', data);
  	}
  </script>
  
	<div id="content" class="content" style="display:none;">
		<div class="image-selector">
			<input id="picture-field" type="file" capture="camera" accept='image/x-png, image/jpg, image/gif, image/jpeg, image/png', title='Choose an image to upload' />
		</div>
		<div id="image-container" class="image-container"></div>
		<div id="image-result" class="image-result">
			<div class="play pull-right">
				<a id="play-sound" class="icon icon-sound"></a>
			</div>
			<h2 id="image-name"></h2>
			<h3 id="image-translation"></h3>
		</div>
	</div>
	<script type="text/javascript" src="js/vendor/jquery-1.11.1.min.js"></script>
	<script type="text/javascript" src="js/vendor/ratchet.min.js"></script>
	<script type="text/javascript" src="js/vendor/spin.min.js"></script>
	<script type="text/javascript" src="js/audio.js"></script>
	<script type="text/javascript" src="js/api.js"></script>
	<script type="text/javascript" src="js/ui.js"></script>
</body>

</html>
